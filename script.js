// Expanded translations for major Indian languages
const demoTranslations = {
  hi: {
    siteTitle: "टीम ओरिजिन",
    siteTagline: "स्मार्ट इनसाइट्स के साथ किसानों को सशक्त बनाना",
    farmerLogin: "किसान लॉगिन",
    vendorLogin: "विक्रेता लॉगिन",
    registerText: "नए उपयोगकर्ता? यहां रजिस्टर करें",
    farmerLoginHeading: "किसान लॉगिन",
    vendorLoginHeading: "विक्रेता लॉगिन",
    usernameLabel: "उपयोगकर्ता नाम",
    passwordLabel: "पासवर्ड",
    loginBtn: "लॉगिन",
    backHome: "होम पर वापस जाए"
  },
  mr: {
    siteTitle: "टीम ओरिजिन",
    siteTagline: "स्मार्ट इनसाइट्ससह शेतकऱ्यांना सशक्त करा",
    farmerLogin: "शेतकरी लॉगिन",
    vendorLogin: "विक्रेता लॉगिन",
    registerText: "नवीन वापरकर्ता? येथे नोंदणी करा",
    farmerLoginHeading: "शेतकरी लॉगिन",
    vendorLoginHeading: "विक्रेता लॉगिन",
    usernameLabel: "वापरकर्ता नाव",
    passwordLabel: "पासवर्ड",
    loginBtn: "लॉगिन",
    backHome: "मुख्यपृष्ठावर परत जा"
  },
  bn: {
    siteTitle: "টিম অরিজিন",
    siteTagline: "স্মার্ট অন্তর্দৃষ্টি দিয়ে কৃষকদের ক্ষমতায়ন",
    farmerLogin: "কৃষক লগইন",
    vendorLogin: "বিক্রেতা লগইন",
    registerText: "নতুন ব্যবহারকারী? এখানে নিবন্ধন করুন",
    farmerLoginHeading: "কৃষক লগইন",
    vendorLoginHeading: "বিক্রেতা লগইন",
    usernameLabel: "ইউজারনেম",
    passwordLabel: "পাসওয়ার্ড",
    loginBtn: "লগইন",
    backHome: "হোমে ফিরে যান"
  },
  ta: {
    siteTitle: "டீம் ஆரிஜின்",
    siteTagline: "ஸ்மார்ட் உள்ளடக்கங்களுடன் விவசாயிகளை ஆற்றல் பெறச் செய்கிறோம்",
    farmerLogin: "விவசாயி உள்நுழைவு",
    vendorLogin: "விற்பனையாளர் உள்நுழைவு",
    registerText: "புதிய பயனர்? இங்கே பதிவு செய்யவும்",
    farmerLoginHeading: "விவசாயி உள்நுழைவு",
    vendorLoginHeading: "விற்பனையாளர் உள்நுழைவு",
    usernameLabel: "பயனர்பெயர்",
    passwordLabel: "கடவுச்சொல்",
    loginBtn: "உள்நுழைக",
    backHome: "முகப்புக்கு திரும்பவும்"
  },
  te: {
    siteTitle: "టీమ్ ఒరిజిన్",
    siteTagline: "స్మార్ట్ అంతర్దృష్టితో రైతులను శక్తివంతం చేయడం",
    farmerLogin: "రైతు లాగిన్",
    vendorLogin: "విక్రేత లాగిన్",
    registerText: "కొత్త వినియోగదారు? ఇక్కడ నమోదు చేయండి",
    farmerLoginHeading: "రైతు లాగిన్",
    vendorLoginHeading: "విక్రేత లాగిన్",
    usernameLabel: "వినియోగదారు పేరు",
    passwordLabel: "పాస్వర్డ్",
    loginBtn: "లాగిన్",
    backHome: "హోమ్‌కు తిరిగి వెళ్లండి"
  },
  ml: {
    siteTitle: "ടീം ഒറിജിൻ",
    siteTagline: "സ്മാർട്ട് ഇൻസൈറ്റ്‌സോടെ കര്‍ഷകരെ ശക്തിപ്പെടുത്തുന്നു",
    farmerLogin: "കർഷകരുടെ പ്രവേശനം",
    vendorLogin: "വണ്ടർ പ്രവേശനം",
    registerText: "പുതിയ ഉപയോക്താവ്? ഇവിടെ രജിസ്റ്റർ ചെയ്യൂ",
    farmerLoginHeading: "കർഷകരുടെ പ്രവേശനം",
    vendorLoginHeading: "വണ്ടർ പ്രവേശനം",
    usernameLabel: "ഉപയോക്തൃനാമം",
    passwordLabel: "പാസ്‌വേഡ്",
    loginBtn: "ലോഗിൻ",
    backHome: "ഹോംലേക്ക് മടങ്ങുക"
  },
  gu: {
    siteTitle: "ટીમ ઓરિજિન",
    siteTagline: "સ્માર્ટ ઇન્સાઇટ્સ સાથે ખેડૂતને સશક્ત બનાવવું",
    farmerLogin: "ખેડૂત લોગિન",
    vendorLogin: "વેપારી લોગિન",
    registerText: "નવો વપરાશકર્તા? અહીં નોંધણી કરો",
    farmerLoginHeading: "ખેડૂત લોગિન",
    vendorLoginHeading: "વેપારી લોગિન",
    usernameLabel: "યૂઝરનામ",
    passwordLabel: "પાસવર્ડ",
    loginBtn: "લોગિન",
    backHome: "હોમ પર પાછા જાઓ"
  },
  pa: {
    siteTitle: "ਟੀਮ ਓਰੀਜਿਨ",
    siteTagline: "ਸਮਾਰਟ ਜਾਣਕਾਰੀ ਨਾਲ ਕਿਸਾਨਾਂ ਨੂੰ ਸ਼ਕਤੀ ਦੇਣਾ",
    farmerLogin: "ਕਿਸਾਨ ਲੌਗਿਨ",
    vendorLogin: "ਵਿਕਰੇਤਾ ਲੌਗਿਨ",
    registerText: "ਨਵਾਂ ਯੂਜ਼ਰ? ਇੱਥੇ ਰਜਿਸਟਰ ਕਰੋ",
    farmerLoginHeading: "ਕਿਸਾਨ ਲੌਗਿਨ",
    vendorLoginHeading: "ਵਿਕਰੇਤਾ ਲੌਗਿਨ",
    usernameLabel: "ਯੂਜ਼ਰਨਾਮ",
    passwordLabel: "ਪਾਸਵਰਡ",
    loginBtn: "ਲੌਗਿਨ",
    backHome: "ਘਰ ਮੋੜੋ"
  },
  kn: {
    siteTitle: "ಟೀಮ್ ಅರಿಜಿನ್",
    siteTagline: "ಸ್ಮಾರ್ಟ್ ಇನ್‌ಸೈಟ್‌ಗಳೊಂದಿಗೆ ರೈತರನ್ನು ಶಕ್ತಿಶಾಲಿಗಳಾಗಿ ಮಾಡುವುದು",
    farmerLogin: "ರೈತ ಲಾಗಿನ್",
    vendorLogin: "ವಿಕ್ರೇತಾ ಲಾಗಿನ್",
    registerText: "ಹೊಸ ಬಳಕೆದಾರ? ಇಲ್ಲಿ ನೋಂದಣಿ ಮಾಡಿ",
    farmerLoginHeading: "ರೈತ ಲಾಗಿನ್",
    vendorLoginHeading: "ವಿಕ್ರೇತಾ ಲಾಗಿನ್",
    usernameLabel: "ಬಳಕೆದಾರ ಹೆಸರು",
    passwordLabel: "ಗುಪ್ತಪದ",
    loginBtn: "ಲಾಗಿನ್",
    backHome: "ಮುಖಪುಟಕ್ಕೆ ಹಿಂತಿರುಗಿ"
  },
  or: {
    siteTitle: "ଟିମ୍ ଓରିଜିନ୍",
    siteTagline: "ସ୍ମାର୍ଟ ଇନସାଇଟ୍ ସହିତ କୃଷକଙ୍କୁ ସଶକ୍ତ କରିବା",
    farmerLogin: "କୃଷକ ଲଗଇନ୍",
    vendorLogin: "ବିକ୍ରେତା ଲଗଇନ୍",
    registerText: "ନୂତନ ବ୍ୟବହାରକାରୀ? ଏଠାରେ ପଞ୍ଜିକରଣ କରନ୍ତୁ",
    farmerLoginHeading: "କୃଷକ ଲଗଇନ୍",
    vendorLoginHeading: "ବିକ୍ରେତା ଲଗଇନ୍",
    usernameLabel: "ଉପଯୋଗକର୍ତ୍ତା ନାମ",
    passwordLabel: "ପାସୱାର୍ଡ",
    loginBtn: "ଲଗଇନ୍",
    backHome: "ମୁଖ୍ୟପୃଷ୍ଠାକୁ ଫେରନ୍ତୁ"
  },
  ur: {
    siteTitle: "ٹیم اوریجن",
    siteTagline: "سمارٹ بصیرتوں کے ساتھ کسانوں کو بااختیار بنانا",
    farmerLogin: "کسان لاگ ان",
    vendorLogin: "فروخت کنندہ لاگ ان",
    registerText: "نیا صارف؟ یہاں رجسٹر کریں",
    farmerLoginHeading: "کسان لاگ ان",
    vendorLoginHeading: "فروخت کنندہ لاگ ان",
    usernameLabel: "یوزر نیم",
    passwordLabel: "پاس ورڈ",
    loginBtn: "لاگ ان",
    backHome: "ہوم پر واپس جائیں"
  },
  en: {
    siteTitle: "Team Origin",
    siteTagline: "Empowering farmers with smart insights",
    farmerLogin: "Farmer Login",
    vendorLogin: "Vendor Login",
    registerText: "New user? Register here",
    farmerLoginHeading: "Farmer Login",
    vendorLoginHeading: "Vendor Login",
    usernameLabel: "Username",
    passwordLabel: "Password",
    loginBtn: "Login",
    backHome: "Back to Home"
  }
};

function updateTexts(lang) {
  const translation = demoTranslations[lang] || demoTranslations['en'];
  if(document.getElementById('site-title')) document.getElementById('site-title').innerText = translation.siteTitle;
  if(document.getElementById('site-tagline')) document.getElementById('site-tagline').innerText = translation.siteTagline;
  if(document.getElementById('farmer-login-btn')) document.getElementById('farmer-login-btn').innerText = translation.farmerLogin;
  if(document.getElementById('vendor-login-btn')) document.getElementById('vendor-login-btn').innerText = translation.vendorLogin;
  if(document.getElementById('register-text')) document.getElementById('register-text').innerHTML = '<a href="register.html">' + translation.registerText + '</a>';

  // Farmer/Vendor login & Register
  if(document.getElementById('farmer-login-heading')) document.getElementById('farmer-login-heading').innerText = translation.farmerLoginHeading;
  if(document.getElementById('vendor-login-heading')) document.getElementById('vendor-login-heading').innerText = translation.vendorLoginHeading;
  if(document.getElementById('register-heading')) document.getElementById('register-heading').innerText = translation.registerText;
  if(document.getElementById('farmer-register-btn')) document.getElementById('farmer-register-btn').innerText = translation.farmerLogin;
  if(document.getElementById('vendor-register-btn')) document.getElementById('vendor-register-btn').innerText = translation.vendorLogin;
  // Common for both logins
  if(document.getElementById('username-label')) document.getElementById('username-label').innerText = translation.usernameLabel;
  if(document.getElementById('password-label')) document.getElementById('password-label').innerText = translation.passwordLabel;
  if(document.getElementById('login-btn')) document.getElementById('login-btn').innerText = translation.loginBtn;
  if(document.getElementById('back-home')) document.getElementById('back-home').innerText = translation.backHome;
}

function setLanguage(lang) {
  try { localStorage.setItem('language', lang); } catch (e) {}
}
function getLanguage() {
  try {
    const l = localStorage.getItem('language');
    return l || 'en';
  } catch (e) { return 'en'; }
}

document.addEventListener('DOMContentLoaded', function() {
  const langSelect = document.getElementById('language-select');
  let lang = getLanguage();
  if(langSelect) {
    langSelect.value = lang;
    langSelect.addEventListener('change', function() {
      lang = langSelect.value;
      setLanguage(lang);
      updateTexts(lang);
    });
  }
  updateTexts(lang);

  // Only attach to farmer-login.html form
  if (window.location.pathname.endsWith('farmer-login.html')) {
    var form = document.querySelector('.login-form');
    var usernameInput = document.getElementById('farmer-username');
    var passwordInput = document.getElementById('farmer-password');
    // make or reuse error div
    var errorDiv = document.getElementById('farmer-login-error');
    if (!errorDiv) {
      errorDiv = document.createElement('div');
      errorDiv.id = 'farmer-login-error';
      errorDiv.style.color = '#d32f2f';
      errorDiv.style.fontSize = '0.95em';
      errorDiv.style.marginTop = '8px';
      errorDiv.style.marginBottom = '2px';
      form.insertBefore(errorDiv, form.querySelector('.note'));
    }
    errorDiv.style.display = 'none';

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      if (
        usernameInput.value === 'FARMER1' &&
        passwordInput.value === 'teamorigin'
      ) {
        window.location.href = 'main.html';
      } else {
        errorDiv.textContent = 'Incorrect username or password.';
        errorDiv.style.display = 'block';
      }
    });
  }
});
